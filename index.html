<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ã‚‰ã„ã‚€ã®æ­Œãˆã‚‹æ›²ãƒªã‚¹ãƒˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root {
        --bg: #020617;
        --bg-card: rgba(15, 23, 42, 0.85);
        --accent: #4b7fff;
        --accent-soft: rgba(75, 127, 255, 0.23);
        --accent-pink: #ff6ac1;
        --text-main: #e5e7eb;
        --text-sub: #9ca3af;
        --border: rgba(148, 163, 184, 0.4);
        --radius-lg: 18px;
        --shadow-soft: 0 14px 40px rgba(0, 0, 0, 0.7);
        }

        /* è¡Œã‚’è§¦ã‚Œã‚‹ã¨å…‰ã‚‹ */
        tbody tr {
        transition: background 0.12s ease, box-shadow 0.12s ease;
        }

        tbody tr:hover {
        background: rgba(56, 189, 248, 0.13);
        box-shadow: 0 0 12px rgba(56, 189, 248, 0.4);
        }


        /* ===== ãƒ™ãƒ¼ã‚¹ ===== */
        * {
        box-sizing: border-box;
        }

        body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
            sans-serif;
        color: var(--text-main);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
        background: #000; /* èª­ã¿è¾¼ã¿å‰ã®è‰² */
        }

        /* ã¼ã‚„ã‘ãŸèƒŒæ™¯å†™çœŸ */
        body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: url("./bg.jpg") center center / cover no-repeat;
        filter: blur(12px) brightness(0.55);
        transform: scale(1.06);
        z-index: -2;
        }

        /* ä¸Šã‹ã‚‰ãƒã‚ªãƒ³ã£ã½ã„ã‚°ãƒ©ãƒ‡ */
        body::after {
        content: "";
        position: fixed;
        inset: 0;
        background:
            radial-gradient(circle at top left, rgba(79, 70, 229, 0.65), transparent 55%),
            radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.5), transparent 55%),
            linear-gradient(to bottom, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.97));
        mix-blend-mode: screen;
        z-index: -1;
        }

        .container {
        max-width: 980px;
        margin: 0 auto;
        padding: 14px 16px 32px;
        }

        /* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
        header {
        position: sticky;
        top: 0;
        z-index: 20;
        padding: 10px 0 8px;
        }

        .header-inner {
        background: radial-gradient(
            circle at top,
            rgba(15, 23, 42, 0.98),
            rgba(15, 23, 42, 0.92)
            );
        border-radius: 20px;
        padding: 12px 16px 14px;
        box-shadow: var(--shadow-soft);
        border: 1px solid rgba(56, 189, 248, 0.25);
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .title-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 6px;
        flex-wrap: wrap;
        justify-content: center;
        }

        h1 {
        margin: 0;
        font-size: 1.9rem;
        font-weight: 900;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        color: #e5edff;
        text-shadow:
            0 0 6px rgba(75, 127, 255, 0.9),
            0 0 18px rgba(56, 189, 248, 0.8),
            0 0 36px rgba(59, 130, 246, 0.7);
        display: flex;
        align-items: center;
        gap: 0.35em;
        }

        h1 span {
        font-size: 1.4rem;
        filter: drop-shadow(0 0 8px rgba(251, 113, 133, 0.8));
        }

        .title-chip {
        font-size: 0.72rem;
        padding: 3px 10px;
        border-radius: 999px;
        background: radial-gradient(circle at top left, #f97316, #7c3aed);
        color: #0b1020;
        border: 1px solid rgba(248, 250, 252, 0.8);
        text-transform: uppercase;
        letter-spacing: 0.14em;
        box-shadow:
            0 0 10px rgba(249, 115, 22, 0.8),
            0 0 26px rgba(124, 58, 237, 0.8);
        }

        .tagline {
        font-size: 0.9rem;
        color: var(--text-sub);
        text-align: center;
        }

        .note {
        font-size: 0.75rem;
        color: #6b7280;
        text-align: center;
        margin-top: 2px;
        }

        /* ===== æ¤œç´¢ & ãƒ•ã‚£ãƒ«ã‚¿ ===== */
        .controls {
        margin-top: 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        }

        .search-box label {
        font-size: 0.78rem;
        color: #9ca3af;
        display: block;
        margin-bottom: 4px;
        }

        .search-input-wrap {
        position: relative;
        }

        .search-box input {
        width: 100%;
        padding: 9px 12px 9px 32px;
        font-size: 0.95rem;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        outline: none;
        background: radial-gradient(circle at top left, #020617, #020617);
        color: var(--text-main);
        box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.8);
        }

        .search-box input::placeholder {
        color: #6b7280;
        }

        .search-box input:focus {
        border-color: var(--accent);
        box-shadow:
            0 0 0 1px rgba(15, 23, 42, 1),
            0 0 18px rgba(59, 130, 246, 0.8);
        }

        .search-icon {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 0.9rem;
        color: #6b7280;
        pointer-events: none;
        }

        .filter-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 4px;
        justify-content: center;
        }

        /* ãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³ï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰ */
        .filter-btn {
        border: 1px solid rgba(148, 163, 184, 0.7);
        border-radius: 999px;
        padding: 4px 9px;
        font-size: 0.75rem;
        background: rgba(15, 23, 42, 0.9);
        color: var(--text-sub);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        transition:
            background 0.12s,
            color 0.12s,
            border-color 0.12s,
            transform 0.06s,
            box-shadow 0.12s;
        }

        .filter-btn span.count {
        font-size: 0.68rem;
        padding: 1px 6px;
        border-radius: 999px;
        background: rgba(31, 41, 55, 0.9);
        color: #e5e7eb;
        }

        .filter-btn.active {
        background: radial-gradient(circle at top, #4f46e5, #0ea5e9);
        color: #f9fafb;
        border-color: rgba(56, 189, 248, 0.9);
        box-shadow:
            0 0 10px rgba(56, 189, 248, 0.85),
            0 0 22px rgba(79, 70, 229, 0.85);
        }

        .filter-btn.active span.count {
        background: rgba(15, 23, 42, 0.9);
        color: #e5e7eb;
        }

        .filter-btn:active {
        transform: translateY(1px) scale(0.98);
        }

        /* ===== ãƒ¡ã‚¤ãƒ³ & ãƒ†ãƒ¼ãƒ–ãƒ« ===== */
        main {
        margin-top: 14px;
        }

        .category-section {
        margin-top: 18px;
        }

        .category-header {
        display: flex;
        align-items: baseline;
        gap: 6px;
        margin-bottom: 6px;
        }

        .category-title {
        font-size: 1.05rem;
        margin: 0;
        padding-left: 10px;
        border-left: 3px solid var(--accent);
        color: #e5edff;
        text-shadow: 0 0 10px rgba(56, 189, 248, 0.7);
        }

        .category-badge {
        font-size: 0.7rem;
        color: var(--text-sub);
        }

        /* ã‚¬ãƒ©ã‚¹ã‚«ãƒ¼ãƒ‰é¢¨ãƒ†ãƒ¼ãƒ–ãƒ« */
        .table-wrapper {
        background: linear-gradient(
            135deg,
            rgba(15, 23, 42, 0.95),
            rgba(15, 23, 42, 0.86)
        );
        border-radius: var(--radius-lg);
        padding: 6px 6px 4px;
        box-shadow: var(--shadow-soft);
        border: 1px solid rgba(37, 99, 235, 0.7);
        overflow-x: auto;
        }

        table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem;
        min-width: 320px;
        }

        th,
        td {
        padding: 6px 8px;
        text-align: left;
        vertical-align: top;
        border-bottom: 1px solid rgba(31, 41, 55, 0.9);
        }

        th {
        font-size: 0.78rem;
        background: radial-gradient(
            circle at top left,
            rgba(15, 23, 42, 0.9),
            rgba(15, 23, 42, 0.98)
        );
        color: #9ca3af;
        white-space: nowrap;
        position: sticky;
        top: 0;
        z-index: 5;
        }

        tr:last-child td {
        border-bottom: none;
        }

        /* æ›²åãƒ»ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»ãƒ¡ãƒ¢ */
        .song-title {
        font-weight: 600;
        letter-spacing: 0.02em;
        }

        .song-artist {
        color: #a5b4fc;
        font-size: 0.85rem;
        }

        .memo-pill {
        display: inline-flex;
        align-items: center;
        padding: 1px 6px;
        border-radius: 999px;
        font-size: 0.72rem;
        border: 1px solid rgba(148, 163, 184, 0.8);
        color: #e5e7eb;
        background: rgba(15, 23, 42, 0.9);
        margin-right: 3px;
        }

        .memo-pill.memo-ng {
        border-color: #f97373;
        background: rgba(127, 29, 29, 0.9);
        color: #fee2e2;
        box-shadow: 0 0 10px rgba(248, 113, 113, 0.7);
        }

        .memo-pill.memo-training {
        border-color: #38bdf8;
        background: rgba(8, 47, 73, 0.96);
        color: #e0f2fe;
        box-shadow: 0 0 10px rgba(56, 189, 248, 0.7);
        }

        .memo-pill.memo-key {
        border-color: #a855f7;
        background: rgba(46, 16, 101, 0.95);
        color: #f5e9ff;
        box-shadow: 0 0 10px rgba(168, 85, 247, 0.7);
        }

        .memo-text {
        font-size: 0.8rem;
        color: #cbd5f5;
        margin-top: 1px;
        }
        
        /* è¡Œã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è‰²ä»˜ã‘ */
        tr.row-ng {
        background: rgba(127, 29, 29, 0.32);
        }

        tr.row-training {
        background: rgba(8, 47, 73, 0.32);
        }

        /* ãƒ›ãƒãƒ¼æ™‚ã‚‚ã¡ã‚ƒã‚“ã¨ä¸Šæ›¸ãã—ãŸã„å ´åˆï¼ˆä»»æ„ï¼‰ */
        tr.row-ng:hover {
        background: rgba(185, 28, 28, 0.45);
        }

        tr.row-training:hover {
        background: rgba(3, 105, 161, 0.45);
        }



        .empty-msg {
        margin-top: 24px;
        text-align: center;
        font-size: 0.85rem;
        color: var(--text-sub);
        }

        /* ===== ãƒ•ãƒƒã‚¿ãƒ¼ ===== */
        footer {
        margin-top: 26px;
        text-align: center;
        font-size: 0.7rem;
        color: #6b7280;
        }

        /* ===== ã‚¹ãƒãƒ›å¯¾å¿œ ===== */
        @media (max-width: 600px) {
        h1 {
            font-size: 1.5rem;
            letter-spacing: 0.12em;
        }

        .header-inner {
            padding: 10px 10px 12px;
        }

        table {
            font-size: 0.84rem;
        }

        th,
        td {
            padding: 6px 6px;
        }

        .container {
            padding-inline: 10px;
        }
        }

        </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-inner">
        <div class="title-row">
          <h1>ã‚‰ã„ã‚€ã®æ­Œãˆã‚‹æ›²ãƒªã‚¹ãƒˆ <span>ğŸ¤</span></h1>
          <span class="title-chip">ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ­“è¿</span>
        </div>
        <div class="tagline">
          é…ä¿¡ã§æ­Œãˆã‚‹ï¼ˆæ­Œã„ãŸã„ï¼‰æ›²ã‚’ã¾ã¨ã‚ãŸãƒšãƒ¼ã‚¸ã§ã™ã€‚
        </div>
        <div class="note">æ›²åãƒ»ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»ãƒ¡ãƒ¢ã§æ¤œç´¢ã§ãã¾ã™</div>

        <div class="controls">
          <div class="search-box">
            <label for="searchInput">æ¤œç´¢ï¼ˆä¾‹ï¼šAdo / ã‚·ãƒ£ãƒ«ãƒ« / ãƒœã‚«ãƒ­ / ç·´ç¿’ä¸­ ãªã©ï¼‰</label>
            <div class="search-input-wrap">
              <span class="search-icon">ğŸ”</span>
              <input
                type="text"
                id="searchInput"
                placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§çµã‚Šè¾¼ã¿..."
              />
            </div>
          </div>

          <div class="filter-row" id="filterRow">
            <!-- JSã§ãƒœã‚¿ãƒ³ã‚’å·®ã—è¾¼ã‚€ -->
          </div>
        </div>
      </div>
    </header>

    <main id="songSections">
      <!-- JSã§ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®ãƒªã‚¹ãƒˆã‚’æç”» -->
    </main>

    <footer>
      æ›´æ–°æ—¥: <span id="updatedDate"></span><br />
      â€» å°‘ã—ãšã¤æ›²ã‚’è¿½åŠ ï¼†æ•´ç†ã—ã¦ã„ãã¾ã™
    </footer>
  </div>

  <script>
    // ======================
    // ã‚«ãƒ†ã‚´ãƒªå®šç¾©
    // ======================
    const CATEGORY_LABELS = {
      all: "ã™ã¹ã¦",
      jpop: "J-POP / Ado / å‚˜æ‘ / Kanaria ãªã©",
      anime: "ã‚¢ãƒ‹ã‚½ãƒ³ / ã‚²ãƒ¼ã‚½ãƒ³",
      vocaloid: "ãƒœã‚«ãƒ­",
      other: "ãã®ä»–",
      ng: "äºŒåº¦ã¨æ­Œã„ãŸããªã„ã‚„ã¤",
      training: "é ‘å¼µã£ã¦è¦šãˆã¦ã‚‹ã‚„ã¤"
    };

    const CATEGORY_ORDER = ["jpop", "anime", "vocaloid", "other", "ng", "training"];

    let allSongs = [];
    let filteredCategory = "all";
    let keyword = "";

    const sectionsContainer = document.getElementById("songSections");
    const searchInput = document.getElementById("searchInput");
    const filterRow = document.getElementById("filterRow");

    // ======================
    // æ›´æ–°æ—¥è¡¨ç¤º
    // ======================
    (function setUpdatedDate() {
      const updatedSpan = document.getElementById("updatedDate");
      const today = new Date();
      const y = today.getFullYear();
      const m = String(today.getMonth() + 1).padStart(2, "0");
      const d = String(today.getDate()).padStart(2, "0");
      updatedSpan.textContent = `${y}/${m}/${d}`;
    })();

    // ======================
    // songs.json èª­ã¿è¾¼ã¿
    // ======================
    async function loadSongs() {
      try {
        const res = await fetch("songs.json", { cache: "no-store" });
        if (!res.ok) {
          throw new Error("songs.json ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ");
        }
        const data = await res.json();
        allSongs = Array.isArray(data) ? data : [];
        buildFilterButtons();
        render();
      } catch (err) {
        console.error(err);
        sectionsContainer.innerHTML =
          '<p class="empty-msg">æ›²ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
      }
    }

    // ======================
    // ãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³ç”Ÿæˆ
    // ======================
    function buildFilterButtons() {
      // ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®æ›²æ•°
      const counts = allSongs.reduce(
        (acc, song) => {
          const cat = song.category || "other";
          acc.all++;
          acc[cat] = (acc[cat] || 0) + 1;
          return acc;
        },
        { all: 0 }
      );

      const cats = ["all", ...CATEGORY_ORDER];

      filterRow.innerHTML = "";
      cats.forEach((key) => {
        const btn = document.createElement("button");
        btn.className = "filter-btn" + (key === filteredCategory ? " active" : "");
        btn.dataset.category = key;
        btn.textContent = CATEGORY_LABELS[key] || key;
        const countSpan = document.createElement("span");
        countSpan.className = "count";
        countSpan.textContent = counts[key] != null ? counts[key] : 0;
        btn.appendChild(countSpan);

        btn.addEventListener("click", () => {
          filteredCategory = key;
          document
            .querySelectorAll(".filter-btn")
            .forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          render();
        });

        filterRow.appendChild(btn);
      });
    }

    // ======================
    // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    // ======================
    function render() {
      const kw = keyword.toLowerCase().trim();
      let songsToShow = allSongs.slice();

      // ã‚«ãƒ†ã‚´ãƒªçµã‚Šè¾¼ã¿
      if (filteredCategory !== "all") {
        songsToShow = songsToShow.filter(
          (s) => (s.category || "other") === filteredCategory
        );
      }

      // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
      if (kw) {
        songsToShow = songsToShow.filter((s) => {
          const t = (s.title || "").toLowerCase();
          const a = (s.artist || "").toLowerCase();
          const m = (s.memo || "").toLowerCase();
          return `${t} ${a} ${m}`.includes(kw);
        });
      }

      if (songsToShow.length === 0) {
        sectionsContainer.innerHTML =
          '<p class="empty-msg">æ¡ä»¶ã«åˆã†æ›²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ã‚«ãƒ†ã‚´ãƒªã‚’å¤‰ãˆã¦ã¿ã¦ãã ã•ã„ã€‚</p>';
        return;
      }

      // ã‚«ãƒ†ã‚´ãƒªã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°
      const groups = {};
      songsToShow.forEach((s) => {
        const cat = s.category || "other";
        if (!groups[cat]) groups[cat] = [];
        groups[cat].push(s);
      });

      // ã„ã„æ„Ÿã˜ã®é †ç•ªã§ä¸¦ã¹ã‚‹
      const order = CATEGORY_ORDER.filter((c) => groups[c]);
      const htmlParts = [];

      order.forEach((cat) => {
        const list = groups[cat];
        htmlParts.push(renderCategorySection(cat, list));
      });

      sectionsContainer.innerHTML = htmlParts.join("");
    }

    function renderCategorySection(catKey, songs) {
      const label =
        catKey === "jpop"
          ? "J-POP / Ado / å‚˜æ‘ãƒˆãƒ¼ã‚¿ / Kanaria ãªã©"
          : catKey === "anime"
          ? "ã‚¢ãƒ‹ã‚½ãƒ³ / ã‚²ãƒ¼ã‚½ãƒ³"
          : catKey === "vocaloid"
          ? "ãƒœã‚«ãƒ­"
          : catKey === "ng"
          ? "äºŒåº¦ã¨æ­Œã„ãŸããªã„ã‚„ã¤"
          : catKey === "training"
          ? "é ‘å¼µã£ã¦è¦šãˆã¦ã‚‹ã‚„ã¤"
          : "ãã®ä»–";

      const headerTitle =
        {
          jpop: "J-POP / ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆç³»",
          anime: "ã‚¢ãƒ‹ã‚½ãƒ³ / ã‚²ãƒ¼ãƒ ã‚½ãƒ³ã‚°",
          vocaloid: "ãƒœã‚«ãƒ­",
          other: "ãã®ä»–",
          ng: "NGãƒªã‚¹ãƒˆï¼ˆæ­Œã„ãŸããªã„ï¼‰",
          training: "ç·´ç¿’ä¸­ã®æ›²"
        }[catKey] || "ãã®ä»–";

      const rowsHtml = songs
        .map((s) => {
          const title = escapeHtml(s.title || "");
          const artist = escapeHtml(s.artist || "");
          const memo = s.memo || "";

          const memoPills = [];

          if (/äºŒåº¦ã¨æ­Œã„ãŸããªã„/.test(memo)) {
            memoPills.push(
              `<span class="memo-pill memo-ng">äºŒåº¦ã¨æ­Œã„ãŸããªã„</span>`
            );
            rowClasses.push("row-ng");
          }
          if (/ç·´ç¿’ä¸­/.test(memo)) {
            memoPills.push(
              `<span class="memo-pill memo-training">ç·´ç¿’ä¸­</span>`
            );
            rowClasses.push("row-training");
          }
          if (/[-+]\d|\/\d{2}/.test(memo)) {
            memoPills.push(
              `<span class="memo-pill memo-key">ã‚­ãƒ¼æƒ…å ±ã‚ã‚Š</span>`
            );
          }

          const memoText = memo
            ? `<div class="memo-text">${escapeHtml(memo)}</div>`
            : "";

          return `
          <tr class="${rowClasses.join(" ")}">
            <td>
              <div class="song-title">${title}</div>
            </td>
            <td>
              <div class="song-artist">${artist || "&nbsp;"}</div>
            </td>
            <td>
              ${memoPills.join(" ")}
              ${memoText}
            </td>
          </tr>
        `;
        })
        .join("");

      return `
      <section class="category-section" data-category="${catKey}">
        <div class="category-header">
          <h2 class="category-title">${headerTitle}</h2>
          <span class="category-badge">${label}</span>
        </div>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>æ›²å</th>
                <th>ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ</th>
                <th>ãƒ¡ãƒ¢</th>
              </tr>
            </thead>
            <tbody>
              ${rowsHtml}
            </tbody>
          </table>
        </div>
      </section>
    `;
    }

    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // ======================
    // ã‚¤ãƒ™ãƒ³ãƒˆ
    // ======================
    searchInput.addEventListener("input", (e) => {
      keyword = e.target.value;
      render();
    });

    // åˆæœŸãƒ­ãƒ¼ãƒ‰
    loadSongs();
  </script>
</body>
</html>
